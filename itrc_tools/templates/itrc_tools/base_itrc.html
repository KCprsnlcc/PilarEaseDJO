<!-- itrc_tools/templates/itrc_tools/base_itrc.html -->

{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>PilarEase ITRC Tools</title>
    <!-- Include Boxicons -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <!-- Include Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Include Toastr CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/itrc.css' %}" />

    <!-- Custom CSS for Toastr Notifications (Optional) -->
    <style>
      /* Customize Toastr Notifications */
      #toast-container > .toast-success {
        background-color: #28a745;
      }

      #toast-container > .toast-error {
        background-color: #dc3545;
      }

      #toast-container > .toast-warning {
        background-color: #ffc107;
      }

      #toast-container > .toast-info {
        background-color: #17a2b8;
      }

      /* Style the Logout Button to look like a menu item */
      .pilarease-itrc-logout-form {
        display: block; /* Changed from inline to block for full-width */
      }

      .pilarease-itrc-logout-button {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        padding: 0;
        font: inherit;
        text-align: left;
        width: 100%;
        height: 100%;
      }

      .pilarease-itrc-logout-button:hover {
        background-color: #f0f0f0; /* Matches hover for other menu items */
      }

      /* Ensure the logout button spans the entire menu item area */
      .pilarease-itrc-menu-item {
        display: flex;
        align-items: center;
        padding: 10px 20px;
        text-decoration: none;
        color: #333;
        width: 100%; /* Ensure full width */
        box-sizing: border-box; /* Include padding in width */
      }

      .pilarease-itrc-menu-item i {
        margin-right: 10px;
      }

      .pilarease-itrc-menu-item:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="pilarease-itrc-sidebar animate__animated animate__fadeInLeft">
      <div class="pilarease-itrc-sidebar-header">
        <img
          src="{% static 'images/PilarLogo.png' %}"
          alt="Logo"
          class="pilarease-itrc-sidebar-logo"
        />
        <span class="pilarease-itrc-sidebar-title">PilarEase</span>
      </div>
      <ul class="pilarease-itrc-sidebar-menu">
        <li>
          <a href="{% url 'itrc_dashboard' %}" class="pilarease-itrc-menu-item">
            <i class="bx bxs-dashboard"></i>
            <span class="pilarease-itrc-menu-text">Dashboard</span>
          </a>
        </li>
        <li>
          <a
            href="{% url 'upload_masterlist' %}"
            class="pilarease-itrc-menu-item"
          >
            <i class="bx bxs-cloud-upload"></i>
            <span class="pilarease-itrc-menu-text">Upload Masterlist</span>
          </a>
        </li>
        <li>
          <a href="{% url 'manage_users' %}" class="pilarease-itrc-menu-item">
            <i class="bx bxs-user-detail"></i>
            <span class="pilarease-itrc-menu-text">Manage Users</span>
          </a>
        </li>
        <li>
          <a
            href="{% url 'system_settings' %}"
            class="pilarease-itrc-menu-item"
          >
            <i class="bx bxs-cog"></i>
            <span class="pilarease-itrc-menu-text">System Settings</span>
          </a>
        </li>
        <li>
          <a
            href="{% url 'generate_reports' %}"
            class="pilarease-itrc-menu-item"
          >
            <i class="bx bxs-report"></i>
            <span class="pilarease-itrc-menu-text">Reports</span>
          </a>
        </li>
        <li>
          <!-- Logout Button as a Form -->
          <form
            action="{% url 'itrc_logout' %}"
            method="post"
            class="pilarease-itrc-logout-form"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="pilarease-itrc-menu-item pilarease-itrc-logout-button"
            >
              <i class="bx bxs-log-out"></i>
              <span class="pilarease-itrc-menu-text">Logout</span>
            </button>
          </form>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="pilarease-itrc-main-content">
      <!-- Header -->
      <div class="pilarease-itrc-header">
        <div class="pilarease-itrc-header-right">
          <i class="bx bxs-bell pilarease-itrc-bell-icon">
            <span class="notification-count">3</span>
          </i>
          <div class="pilarease-itrc-profile-icon">
            {{ request.user.username|slice:":1"|upper }}
          </div>
        </div>
      </div>

      <!-- Content Area -->
      <div class="pilarease-itrc-content">
        {% block itrc_content %}
        <!-- ITRC-specific content will be injected here -->
        {% endblock %}
      </div>
    </div>

    <!-- Include jQuery (required for Toastr) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Include Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <!-- Include Custom JS -->
    <script src="{% static 'js/scripts.js' %}"></script>

    <!-- Toastr Notifications -->
    <script>
      $(document).ready(function () {
        {% if messages %}
          {% for message in messages %}
            toastr.options = {
              closeButton: true,
              progressBar: true,
              positionClass: "toast-top-right",
              timeOut: "5000",
              extendedTimeOut: "1000",
              showEasing: "swing",
              hideEasing: "linear",
              showMethod: "fadeIn",
              hideMethod: "fadeOut",
            };
            toastr["{{ message.tags }}"]("{{ message|escapejs }}");
          {% endfor %}
        {% endif %}
      });
    </script>

    <!-- Page Specific Scripts -->
    {% block extra_scripts %} {% endblock %}
  </body>
</html>
