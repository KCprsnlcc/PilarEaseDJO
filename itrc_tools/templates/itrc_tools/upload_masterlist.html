<!-- itrc_tools/templates/itrc_tools/upload_masterlist.html -->

{% extends "itrc_tools/base_itrc.html" %} {% block itrc_content %}
<div
  class="pilarease-itrc-upload-masterlist-container animate__animated animate__fadeIn"
>
  <h1 class="pilarease-itrc-section-title">Upload Enrollment Masterlist</h1>

  <form
    method="post"
    enctype="multipart/form-data"
    class="pilarease-itrc-upload-form"
  >
    {% csrf_token %} {{ form.non_field_errors }}

    <div class="pilarease-itrc-form-group">
      {{ form.csv_file.label_tag }} {{ form.csv_file }} {% if
      form.csv_file.errors %}
      <div class="pilarease-itrc-error">{{ form.csv_file.errors }}</div>
      {% endif %}
    </div>

    <button type="submit" class="pilarease-itrc-action-button upload-button">
      <i class="bx bxs-cloud-upload"></i> Upload
    </button>
  </form>
</div>

<!-- Toastr Notifications -->
{% if messages %}
<script>
  $(document).ready(function() {
      {% for message in messages %}
          toastr.options.closeButton = true;
          toastr.options.progressBar = true;
          toastr.options.positionClass = "toast-bottom-right";
          toastr.options.showDuration = 300;
          toastr.options.hideDuration = 1000;
          toastr.options.timeOut = 5000;
          toastr.options.extendedTimeOut = 1000;
          toastr.options.showEasing = "swing";
          toastr.options.hideEasing = "linear";
          toastr.options.showMethod = "fadeIn";
          toastr.options.hideMethod = "fadeOut";

          {% if message.tags == 'success' %}
              toastr.success("{{ message|escapejs }}", "Success");
          {% elif message.tags == 'error' %}
              toastr.error("{{ message|escapejs }}", "Error");
          {% elif message.tags == 'warning' %}
              toastr.warning("{{ message|escapejs }}", "Warning");
          {% elif message.tags == 'info' %}
              toastr.info("{{ message|escapejs }}", "Information");
          {% endif %}
      {% endfor %}
  });
</script>
{% endif %} {% endblock %}
