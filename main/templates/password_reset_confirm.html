{% load static %} {% load compress %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reset Your Password</title>
    {% compress css %}
    <link rel="stylesheet" href="{% static 'css/credential.css' %}?v=1.0" />
    {% endcompress %}
  </head>
  <body>
    <div id="reset-container" class="transition-container">
      <header id="reset-header">
        <img
          src="https://raw.githubusercontent.com/KCprsnlcc/Images/main/PilarLogo.png"
          alt="Pilar Logo"
        />
        <img
          src="https://raw.githubusercontent.com/KCprsnlcc/Images/main/PilarEaseLogo.png"
          alt="PilarEase Logo"
        />
        <span id="title">PilarEase</span>
      </header>

      <div id="reset-body">
        {% if validlink %}
        <h2 style="color: #689e4b">Reset Your Password</h2>
        <p>
          Your password must be at least 8 characters long, contain both
          uppercase and lowercase letters, include at least one numeric digit,
          and one special character.
        </p>
        <form id="resetPasswordForm" method="post">
          {% csrf_token %}
          <input
            type="password"
            name="new_password"
            placeholder="New Password"
            required
          />
          <input
            type="password"
            name="new_password_confirm"
            placeholder="Confirm Password"
            required
          />
          <button type="submit" class="btn">Reset Password</button>
        </form>
        {% else %}
        <p style="color: #e74c3c">The reset link is invalid or has expired.</p>
        {% endif %}

        <!-- Loader Overlay -->
        <div id="resetpassOverlay">
          <div id="resetpassLoader"></div>
        </div>

        <!-- Error Notification Dialog -->
        <div id="resetPasswordErrorBox" class="flat-ui-dialog error">
          <div id="resetPasswordErrorContent"></div>
        </div>
      </div>

      <footer id="reset-footer">
        <p id="randomTip">
          Tip: Ensure your password is strong and unique. Avoid using easily
          guessable information like your birthdate.
        </p>
      </footer>
    </div>

    {% compress js %}
    <script src="{% static 'js/credential.js' %}?v=1.0"></script>
    <script>
      // List of random tips
      const tips = [
        "Use a combination of letters, numbers, and special characters for a strong password.",
        "Avoid using the same password for multiple accounts.",
        "Consider using a password manager to store and manage your passwords securely.",
        "Change your passwords regularly, especially for sensitive accounts.",
        "Never share your passwords with anyone.",
      ];

      // Function to display a random tip with pop-in animation
      function displayRandomTip() {
        const randomIndex = Math.floor(Math.random() * tips.length);
        const randomTipElement = document.getElementById("randomTip");
        randomTipElement.classList.remove("pop-in");
        void randomTipElement.offsetWidth; // Trigger reflow to restart the animation
        randomTipElement.classList.add("pop-in");
        randomTipElement.innerText = `Tip: ${tips[randomIndex]}`;
      }

      // Set interval to change the tip every 3 seconds
      setInterval(displayRandomTip, 3000);
    </script>
    {% endcompress %}
  </body>
</html>
