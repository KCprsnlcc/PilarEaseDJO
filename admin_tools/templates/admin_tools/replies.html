{% extends "admin_tools/base_admin.html" %} {% load static %} {% load compress
%} {% block content %}
<h1>Replies</h1>
<div class="status-container">
  <form method="get" class="search-form">
    <input
      type="text"
      name="search"
      placeholder="Search..."
      value="{{ search_query }}"
    />
    <button type="submit">Search</button>
  </form>

  <table class="status-table">
    <thead>
      <tr>
        <th>No.</th>
        <th>Student ID</th>
        <th>Title</th>
        <th>Reply</th>
        <th>Last Sent</th>
        <th>Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for reply in replies %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ reply.student_id }}</td>
        <td>{{ reply.status_title }}</td>
        <td>{{ reply.text|truncatewords:10 }}</td>
        <td>{{ reply.last_sent }}</td>
        <td>{{ reply.created_at|date:"Y-m-d" }}</td>
        <td>
          <a href="{% url 'delete_reply' reply.id %}" class="delete-icon"
            ><i class="bx bx-trash"></i
          ></a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if not replies %}
  <p>No replies found.</p>
  {% endif %}
  <div class="pagination">
    <span class="step-links">
      {% if page_obj.has_previous %}
      <a href="?page=1&search={{ search_query }}">first</a>
      <a
        href="?page={{ page_obj.previous_page_number }}&search={{ search_query }}"
        >previous</a
      >
      {% endif %}

      <span class="current">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
      </span>

      {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}&search={{ search_query }}"
        >next</a
      >
      <a
        href="?page={{ page_obj.paginator.num_pages }}&search={{ search_query }}"
        >last</a
      >
      {% endif %}
    </span>
  </div>
</div>
{% endblock %}
